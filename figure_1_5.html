<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Figure 1.5 — Quantized Energy Levels (H and He+)</title>
  <style>
    :root {
      --ink: #1b1e1f;
      --muted: #5c6468;
      --accent: #1f6f8b;
      --accent-2: #b86b0f;
      --bg: #f7f3ee;
      --grid: rgba(27, 30, 31, 0.12);
    }
    body {
      margin: 0;
      padding: 24px;
      font-family: Georgia, "Times New Roman", serif;
      color: var(--ink);
      background: var(--bg);
    }
    .figure-wrap {
      max-width: 900px;
      margin: 0 auto;
      background: #fff;
      border: 1px solid #e6dfd6;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.06);
      padding: 20px 20px 16px 20px;
    }
    .figure-title {
      font-size: 18px;
      font-weight: 700;
      margin: 0 0 6px 0;
    }
    .figure-subtitle {
      font-size: 14px;
      color: var(--muted);
      margin: 0 0 16px 0;
    }
    .controls {
      display: flex;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
      margin-bottom: 12px;
      font-family: "Segoe UI", "Helvetica Neue", sans-serif;
    }
    .control-chip {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid #d7d0c6;
      background: #faf7f2;
      font-size: 12px;
      color: var(--ink);
    }
    .control-chip input {
      margin: 0;
    }
    .svg-wrap {
      width: 100%;
      aspect-ratio: 16 / 9;
    }
    svg {
      width: 100%;
      height: 100%;
      display: block;
    }
    .axis line,
    .axis path {
      stroke: var(--ink);
      stroke-width: 1.2;
    }
    .grid line {
      stroke: var(--grid);
      stroke-width: 1;
    }
    .level {
      stroke-width: 2.4;
      stroke-linecap: round;
      cursor: pointer;
    }
    .level.h { stroke: var(--accent); }
    .level.he { stroke: var(--accent-2); }
    .label {
      font-family: "Segoe UI", "Helvetica Neue", sans-serif;
      fill: var(--ink);
      font-size: 12px;
    }
    .caption {
      margin-top: 12px;
      font-size: 13px;
      line-height: 1.45;
      color: var(--muted);
    }
    .tooltip {
      position: absolute;
      pointer-events: none;
      padding: 6px 8px;
      background: #111;
      color: #fff;
      font-size: 12px;
      border-radius: 6px;
      opacity: 0;
      transform: translateY(-6px);
      transition: opacity 120ms ease, transform 120ms ease;
    }
  </style>
</head>
<body>
  <div class="figure-wrap">
    <div class="figure-title">Figure 1.5 · Quantized energy levels of H and He+</div>
    <div class="figure-subtitle">Energy levels for a hydrogenic atom scale with Z²: E = −13.6 eV · Z² / n².</div>

    <div class="controls">
      <label class="control-chip"><input type="checkbox" id="toggle-h" checked />Show H (Z = 1)</label>
      <label class="control-chip"><input type="checkbox" id="toggle-he" checked />Show He+ (Z = 2)</label>
      <label class="control-chip">n max
        <input type="range" id="n-max" min="3" max="8" value="6" />
        <span id="n-max-label">6</span>
      </label>
    </div>

    <div class="svg-wrap">
      <svg id="energy-plot" viewBox="0 0 900 500" role="img" aria-label="Quantized energy levels for hydrogen and helium ion."></svg>
    </div>

    <div class="caption">
      FIGURE 1.5 — The quantized energy levels of an H atom (Z = 1) and an He+ ion (Z = 2). The energy
      levels of a hydrogenic atom are proportional to Z².
    </div>
  </div>

  <div class="tooltip" id="tooltip"></div>

  <script>
    const svg = document.getElementById('energy-plot');
    const tooltip = document.getElementById('tooltip');
    const toggleH = document.getElementById('toggle-h');
    const toggleHe = document.getElementById('toggle-he');
    const nMaxInput = document.getElementById('n-max');
    const nMaxLabel = document.getElementById('n-max-label');

    const width = 900;
    const height = 500;
    const margin = { top: 30, right: 40, bottom: 50, left: 80 };
    const plotW = width - margin.left - margin.right;
    const plotH = height - margin.top - margin.bottom;

    const energies = (Z, nMax) => {
      const levels = [];
      for (let n = 1; n <= nMax; n++) {
        const E = -13.6 * (Z * Z) / (n * n);
        levels.push({ n, E });
      }
      return levels;
    };

    const yScale = (E, Emin) => {
      return margin.top + ((0 - E) / (0 - Emin)) * plotH;
    };

    const clearSvg = () => {
      while (svg.firstChild) svg.removeChild(svg.firstChild);
    };

    const draw = () => {
      clearSvg();
      const nMax = parseInt(nMaxInput.value, 10);
      nMaxLabel.textContent = nMax;

      const Emin = Math.min(-13.6 * 4, -13.6 * 4 * (4));
      const minEnergy = Math.min(-13.6 * 4, -13.6 * 4 * 1); // baseline for axis
      const overallMin = Math.min(-13.6 * 4 * (1), -13.6 * 4 * (nMax ** 0))
      const floorEnergy = Math.min(-13.6 * 4, -13.6 * 4 * (1));
      const axisMin = Math.min(-60, -13.6 * 4);

      const xH = margin.left + plotW * 0.35;
      const xHe = margin.left + plotW * 0.7;

      // Grid + axis
      const axisGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');
      axisGroup.setAttribute('class', 'axis');
      svg.appendChild(axisGroup);

      const gridGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');
      gridGroup.setAttribute('class', 'grid');
      svg.appendChild(gridGroup);

      const tickValues = [0, -10, -20, -30, -40, -50, -60];
      tickValues.forEach(tick => {
        const y = yScale(tick, -60);
        const gridLine = document.createElementNS('http://www.w3.org/2000/svg', 'line');
        gridLine.setAttribute('x1', margin.left);
        gridLine.setAttribute('x2', width - margin.right);
        gridLine.setAttribute('y1', y);
        gridLine.setAttribute('y2', y);
        gridGroup.appendChild(gridLine);

        const tickLine = document.createElementNS('http://www.w3.org/2000/svg', 'line');
        tickLine.setAttribute('x1', margin.left - 6);
        tickLine.setAttribute('x2', margin.left);
        tickLine.setAttribute('y1', y);
        tickLine.setAttribute('y2', y);
        axisGroup.appendChild(tickLine);

        const label = document.createElementNS('http://www.w3.org/2000/svg', 'text');
        label.setAttribute('class', 'label');
        label.setAttribute('x', margin.left - 12);
        label.setAttribute('y', y + 4);
        label.setAttribute('text-anchor', 'end');
        label.textContent = `${tick} eV`;
        axisGroup.appendChild(label);
      });

      const axisLine = document.createElementNS('http://www.w3.org/2000/svg', 'line');
      axisLine.setAttribute('x1', margin.left);
      axisLine.setAttribute('x2', margin.left);
      axisLine.setAttribute('y1', margin.top);
      axisLine.setAttribute('y2', height - margin.bottom);
      axisGroup.appendChild(axisLine);

      const title = document.createElementNS('http://www.w3.org/2000/svg', 'text');
      title.setAttribute('class', 'label');
      title.setAttribute('x', margin.left);
      title.setAttribute('y', margin.top - 10);
      title.setAttribute('text-anchor', 'start');
      title.textContent = 'Energy (eV)';
      svg.appendChild(title);

      const labelH = document.createElementNS('http://www.w3.org/2000/svg', 'text');
      labelH.setAttribute('class', 'label');
      labelH.setAttribute('x', xH);
      labelH.setAttribute('y', height - margin.bottom + 24);
      labelH.setAttribute('text-anchor', 'middle');
      labelH.textContent = 'H (Z = 1)';
      svg.appendChild(labelH);

      const labelHe = document.createElementNS('http://www.w3.org/2000/svg', 'text');
      labelHe.setAttribute('class', 'label');
      labelHe.setAttribute('x', xHe);
      labelHe.setAttribute('y', height - margin.bottom + 24);
      labelHe.setAttribute('text-anchor', 'middle');
      labelHe.textContent = 'He+ (Z = 2)';
      svg.appendChild(labelHe);

      const drawLevels = (Z, x, className, show) => {
        if (!show) return;
        energies(Z, nMax).forEach(({ n, E }) => {
          const y = yScale(E, -60);
          const level = document.createElementNS('http://www.w3.org/2000/svg', 'line');
          level.setAttribute('class', `level ${className}`);
          level.setAttribute('x1', x - 60);
          level.setAttribute('x2', x + 60);
          level.setAttribute('y1', y);
          level.setAttribute('y2', y);
          level.dataset.n = n;
          level.dataset.energy = E.toFixed(2);
          level.dataset.z = Z;
          svg.appendChild(level);

          const nLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');
          nLabel.setAttribute('class', 'label');
          nLabel.setAttribute('x', x + 72);
          nLabel.setAttribute('y', y + 4);
          nLabel.textContent = `n = ${n}`;
          svg.appendChild(nLabel);

          level.addEventListener('mouseenter', (event) => {
            tooltip.style.opacity = 1;
            tooltip.style.transform = 'translateY(-10px)';
            tooltip.textContent = `Z=${Z} · n=${n} · E=${E.toFixed(2)} eV`;
          });
          level.addEventListener('mousemove', (event) => {
            tooltip.style.left = `${event.pageX + 12}px`;
            tooltip.style.top = `${event.pageY - 12}px`;
          });
          level.addEventListener('mouseleave', () => {
            tooltip.style.opacity = 0;
            tooltip.style.transform = 'translateY(-6px)';
          });
        });
      };

      drawLevels(1, xH, 'h', toggleH.checked);
      drawLevels(2, xHe, 'he', toggleHe.checked);
    };

    toggleH.addEventListener('change', draw);
    toggleHe.addEventListener('change', draw);
    nMaxInput.addEventListener('input', draw);

    draw();
  </script>
</body>
</html>
